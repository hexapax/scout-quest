# ============================================
# Scout Quest — LibreChat Environment Variables
# ============================================
# Locked-down scout instance at scout-quest.hexapax.com
#
# SECRET STORAGE: This file lives in GCS, NOT in git.
#   Copy .env.example → .env, fill in secrets, then:
#     ./deploy-config.sh push     Upload .env files to GCS
#     ./deploy-config.sh pull     Download .env files from GCS
#     ./deploy-config.sh <IP>     Deploy to VM (pulls .env from GCS)
#
# INSTRUCTIONS:
# 1. Fill in all values marked with <FILL_IN>
# 2. Security keys marked <GENERATE> will be auto-filled by deploy-config.sh
# 3. API keys: get from each provider's console

# =================================
# Server
# =================================
HOST=0.0.0.0
PORT=3081
DOMAIN_CLIENT=https://scout-quest.hexapax.com
DOMAIN_SERVER=https://scout-quest.hexapax.com
NO_INDEX=true

# =================================
# Authentication
# =================================
# First user to register becomes admin.
# Set to false AFTER you and Will have registered.
ALLOW_REGISTRATION=true
ALLOW_SOCIAL_LOGIN=true
ALLOW_SOCIAL_REGISTRATION=true
ALLOW_PASSWORD_RESET=true
ALLOW_UNVERIFIED_EMAIL_LOGIN=true
ALLOW_PASSWORD_SIGN_UP=false
# SECURITY: Password sign-up is disabled. All users must sign in via Google OAuth.
# Only emails added as test users in the GCP OAuth consent screen can access the app.

# Session length (milliseconds) — 7 days
SESSION_EXPIRY=604800000

# --- Google OAuth ---
# Get these from: https://console.cloud.google.com/apis/credentials
# 1. Create a SEPARATE OAuth 2.0 Client ID for this instance
# 2. Authorized JS origins: https://scout-quest.hexapax.com
# 3. Authorized redirect URI: https://scout-quest.hexapax.com/oauth/google/callback
# 4. OAuth consent screen must be in "Testing" mode
# 5. Add scout email addresses as test users in the consent screen settings
GOOGLE_CLIENT_ID=<FILL_IN>
GOOGLE_CLIENT_SECRET=<FILL_IN>
GOOGLE_CALLBACK_URL=/oauth/google/callback

# Social login buttons shown on login page
SOCIAL_LOGIN_PROVIDERS=google

# =================================
# Security Keys (auto-generated by deploy-config.sh)
# =================================
CREDS_IV=<GENERATE>
CREDS_KEY=<GENERATE>
JWT_SECRET=<GENERATE>
JWT_REFRESH_SECRET=<GENERATE>

# =================================
# Database
# =================================
MONGO_URI=mongodb://mongodb:27017/scoutquest

# =================================
# AI Provider API Keys
# =================================
# Anthropic (REQUIRED — primary model for Scout Coach)
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=<FILL_IN>

# OpenAI (REQUIRED for voice/STT/TTS + GPT Scout Coach preset)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=<FILL_IN>

# Google Gemini (for Gemini Scout Coach preset)
# Get from: https://aistudio.google.com/apikey
GOOGLE_KEY=<FILL_IN_OR_LEAVE>

# DeepSeek (optional — very cheap, strong reasoning)
# Get from: https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=<FILL_IN_OR_LEAVE>

# OpenRouter (optional — gateway to dozens of open models)
# Get from: https://openrouter.ai/keys
OPENROUTER_KEY=<FILL_IN_OR_LEAVE>

# =================================
# Speech (STT/TTS)
# =================================
STT_API_KEY=${OPENAI_API_KEY}
TTS_API_KEY=${OPENAI_API_KEY}

# =================================
# Email (for password reset and notifications)
# =================================
EMAIL_SERVICE=gmail
EMAIL_USERNAME=<FILL_IN>
EMAIL_PASSWORD=<FILL_IN>
EMAIL_FROM=<FILL_IN>
EMAIL_FROM_NAME=Scout Quest

# =================================
# Search (optional — enables web search in chat)
# =================================
# SEARCH_PROVIDER=serper
# SERPER_API_KEY=

# =================================
# Push Notifications (ntfy.sh)
# =================================
# Pick a unique topic name and subscribe in the ntfy app on Will's iPad.
# Free, no account needed. See: https://ntfy.sh
NTFY_TOPIC=scout-quest-will

# =================================
# Docker / LibreChat internals
# =================================
# Must match the scoutcoach user on the VM (id scoutcoach)
UID=997
GID=986
MEILI_MASTER_KEY=<GENERATE>

# =================================
# Logging
# =================================
DEBUG_LOGGING=true
