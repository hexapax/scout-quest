# ============================================
# Scout Quest — LibreChat Configuration
# ============================================
# Locked-down instance with curated model presets
version: 1.2.8
cache: true

# --- Registration ---
registration:
  socialLogins:
    - google

# --- Memory (persists facts across conversations) ---
memory:
  disabled: false
  validKeys:
    - "quest_progress"
    - "personal_preferences"
    - "learned_facts"
    - "conversation_context"
  tokenLimit: 4000
  charLimit: 15000
  personalize: true
  messageWindowSize: 10
  agent:
    provider: "anthropic"
    model: "claude-sonnet-4-6"
    instructions: |
      You are a memory agent for a Boy Scout coaching system called Scout Quest.
      Store ONLY explicitly stated information in these categories:
      - quest_progress: merit badge requirements completed, hardware parts purchased/installed,
        budget amounts earned/spent, chore streak counts, current quest week and phase
      - personal_preferences: communication style, interests, what motivates the scout,
        preferred rewards, attention span notes
      - learned_facts: scout name, age, troop number, counselor names and emails,
        parent/guardian info, scoutmaster details
      - conversation_context: current phase of PC build quest, what was discussed last session,
        pending decisions, upcoming deadlines
      Be concise. Focus on facts. Delete outdated or corrected information promptly.
      When a scout completes a requirement or makes a purchase, update quest_progress.
    model_parameters:
      max_tokens: 2000

# --- Speech (voice that stays in-context) ---
speech:
  stt:
    openai:
      apiKey: "${STT_API_KEY}"
      model: "whisper-1"
  tts:
    openai:
      apiKey: "${TTS_API_KEY}"
      model: "tts-1"
      voices:
        - "nova"
        - "alloy"
        - "echo"
        - "fable"
        - "onyx"
        - "shimmer"

# --- MCP Servers ---
mcpServers:
  scout-quest:
    type: stdio
    command: node
    args:
      - "/app/mcp-servers/scout-quest/dist/scout.js"
    env:
      MONGO_URI: "mongodb://mongodb:27017/scoutquest"
      NTFY_TOPIC: "${NTFY_TOPIC}"
      SCOUT_EMAIL: "{{user.email}}"
    timeout: 30000
    serverInstructions: true

# --- Custom Endpoints (cheaper / open-source models) ---
endpoints:
  custom:
    # DeepSeek — very cheap, strong reasoning
    - name: "Deepseek"
      apiKey: "${DEEPSEEK_API_KEY}"
      baseURL: "https://api.deepseek.com/v1"
      models:
        default:
          - "deepseek-chat"
          - "deepseek-reasoner"
        fetch: false
      titleConvo: true
      titleModel: "deepseek-chat"
      modelDisplayLabel: "Deepseek"

    # OpenRouter — gateway to dozens of open models
    - name: "OpenRouter"
      apiKey: "${OPENROUTER_KEY}"
      baseURL: "https://openrouter.ai/api/v1"
      models:
        default:
          - "google/gemma-3-27b-it"
          - "meta-llama/llama-4-scout"
          - "meta-llama/llama-3.3-70b-instruct"
          - "mistralai/mistral-small-3.1-24b-instruct"
          - "qwen/qwen-2.5-72b-instruct"
        fetch: true
      titleConvo: true
      titleModel: "current_model"
      summarize: false
      summaryModel: "current_model"
      dropParams:
        - "stop"
      modelDisplayLabel: "OpenRouter"

# --- Model Specs (lock UI to curated presets) ---
modelSpecs:
  enforce: true
  prioritize: true
  list:
    - name: "Scout Coach (Claude)"
      label: "Scout Coach"
      description: "Your AI Scout Coach — best for merit badge help, PC build guidance, and quest planning"
      preset:
        endpoint: "anthropic"
        model: "claude-sonnet-4-6"
        maxOutputTokens: 4096
        mcpServers:
          - "scout-quest"
        promptPrefix: |
          You are Scout Coach, an AI mentor for a Boy Scout working on merit badges and a PC-building quest.
          You have access to MCP tools that track quest progress, chores, budgets, and merit badge requirements.
          Use your tools proactively to check the scout's current status before giving advice.
          Keep responses encouraging, age-appropriate, and focused on the scout's goals.
          When discussing merit badge requirements, always verify against the scout's tracked progress.
          For PC build decisions, consider the scout's budget and what they've already earned through chores.

    - name: "Scout Coach (Gemini)"
      label: "Scout Coach (Gemini)"
      description: "AI Scout Coach powered by Gemini 3 Flash — great tool use at lower cost"
      preset:
        endpoint: "google"
        model: "gemini-3-flash"
        temperature: 0.7
        maxOutputTokens: 4096
        mcpServers:
          - "scout-quest"
        promptPrefix: |
          You are Scout Coach, an AI mentor for a Boy Scout working on merit badges and a PC-building quest.
          You have access to MCP tools that track quest progress, chores, budgets, and merit badge requirements.
          Use your tools proactively to check the scout's current status before giving advice.
          Keep responses encouraging, age-appropriate, and focused on the scout's goals.
          When discussing merit badge requirements, always verify against the scout's tracked progress.
          For PC build decisions, consider the scout's budget and what they've already earned through chores.

    - name: "Scout Coach (GPT)"
      label: "Scout Coach (GPT)"
      description: "AI Scout Coach powered by GPT-4.1 mini — budget-friendly with solid tool use"
      preset:
        endpoint: "openAI"
        model: "gpt-4.1-mini"
        temperature: 0.7
        max_tokens: 4096
        mcpServers:
          - "scout-quest"
        promptPrefix: |
          You are Scout Coach, an AI mentor for a Boy Scout working on merit badges and a PC-building quest.
          You have access to MCP tools that track quest progress, chores, budgets, and merit badge requirements.
          Use your tools proactively to check the scout's current status before giving advice.
          Keep responses encouraging, age-appropriate, and focused on the scout's goals.
          When discussing merit badge requirements, always verify against the scout's tracked progress.
          For PC build decisions, consider the scout's budget and what they've already earned through chores.

    - name: "Quick Chat (DeepSeek)"
      label: "Quick Chat"
      description: "Fast and cheap — good for quick questions and brainstorming"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-chat"
        temperature: 0.7

    - name: "Deep Think (DeepSeek)"
      label: "Deep Think"
      description: "Step-by-step reasoning — good for math, logic, and tricky problems"
      preset:
        endpoint: "Deepseek"
        model: "deepseek-reasoner"
        temperature: 0.3

    - name: "Open Explorer (OpenRouter)"
      label: "Open Explorer"
      description: "Try different open-source AI models — Llama, Gemma, Mistral, Qwen"
      preset:
        endpoint: "OpenRouter"
        model: "meta-llama/llama-4-scout"
        temperature: 0.7

# --- Interface customization ---
interface:
  privacyPolicy:
    externalUrl: ""
    openNewTab: true
  termsOfService:
    externalUrl: ""
    openNewTab: true
